
<!DOCTYPE HTML>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="styles/kendo.mobile.all.min.css">
    <script src="scripts/libs/jquery.min.js" ></script>
    <script src="scripts/libs/kendo.mobile.min.js" ></script>
    <title>King Steakhouse</title>
</head>

<body>
<!-- Lay out -->
<div data-role="layout" data-id="main-layout">
    <div data-role="header">
        <div data-role="navbar">
            <a class="backbutton nav-button" data-align="left" data-role="backbutton" data-transition="slide:left reverse" data-click="smartSurvey.goPrev">Home</a>
            <span data-role="view-title"></span>
            <a class="cancelbutton nav-button" data-align="right" data-role="button" data-click="smartSurvey.cancel">Cancel</a>
        </div>
    </div>
</div>

<!-- views -->
<div data-role="view" id="home-view" data-title="King Steakhouse" data-layout="main-layout"
     data-init="smartSurvey.viewInit"
     data-before-show="smartSurvey.viewWillAppear"
        >

    <h2>King Steakhouse</h2>
    <h2>Customer Satisfaction Survey</h2>
    <p>Thank you for patronising King Steakhouse.</p>
    <p>Please complete this short survey so we can know more about you and improve our food and service.</p>
    <p>As a token of appreciation, we will send you an e-coupon which you can redeem for 2 free drinks on your next visit!</p>
    <a id="next-start" data-click="smartSurvey.goNext" data-role="button" style="display: block; margin: 1em 2em; text-align: center;">Take Survey</a>
</div>

<div data-role="view" id="page1-view" data-title="Step 1 of 4" data-layout="main-layout" data-before-show="smartSurvey.viewWillAppear">
    Step 1
    <a id="next-1" data-click="smartSurvey.goNext" data-role="button" style="display: block; margin: 1em 2em; text-align: center;">Next</a>
</div>

<div data-role="view" id="page2-view" data-title="Step 2 of 4" data-layout="main-layout" data-before-show="smartSurvey.viewWillAppear">
    Step 2
    <a id="next-2" data-click="smartSurvey.goNext" data-role="button" style="display: block; margin: 1em 2em; text-align: center;">Next</a>
</div>

<div data-role="view" id="page3-view" data-title="Step 3 of 4" data-layout="main-layout" data-before-show="smartSurvey.viewWillAppear">
    Step 3
    <a id="next-3" data-click="smartSurvey.goNext" data-role="button" style="display: block; margin: 1em 2em; text-align: center;">Next</a>
</div>

<div data-role="view" id="page4-view" data-title="Step 4 of 4" data-layout="main-layout" data-before-show="smartSurvey.viewWillAppear">
    Step 4
    <a id="next-4" data-click="smartSurvey.goNext" data-role="button" style="display: block; margin: 1em 2em; text-align: center; background-color: green">Submit</a>
</div>

<div data-role="view" id="thankyou-view" data-title="Thank you" data-layout="main-layout" data-before-show="smartSurvey.viewWillAppear">
    Thank you
    <a id="next-4" data-click="smartSurvey.goNext" data-role="button" style="display: block; margin: 1em 2em; text-align: center;">Bye!</a>
</div>

<script>
var smartSurvey = (function() {
    var _app;
    var nextLink, prevLink, backButtonText;

    return {
        init: function() {
            _app = new kendo.mobile.Application(document.body);
            console.log("App Initialized");
        },

        app: _app,

        goNext: function(event) {
            console.log("Going next to: "+ nextLink);
            _app.navigate(nextLink, "slide");
            _app.view().header.find(".backbutton").text(backButtonText);
        },

        goPrev: function(event) {
            event.preventDefault();
            console.log("Going prev to: "+ prevLink);
            _app.navigate(prevLink, "slide:left reverse");
            _app.view().header.find(".backbutton").text(backButtonText);
        },

        cancel: function(event) {
            console.log("Cancel");
        },

        viewInit: function(e) {
            var viewId = this.element.prop("id");
            console.log("View inited: " + viewId);
        },

        viewWillAppear: function(e) {
            var viewId = this.element.prop("id");
            console.log("View will appear: " + viewId);
            if (viewId == "home-view") {
                e.view.header.find(".backbutton").hide();
                e.view.header.find(".cancelbutton").hide();
            } else {
                e.view.header.find(".backbutton").show();
                e.view.header.find(".cancelbutton").show();
            }
            switch(viewId) {
                case "home-view":
                    prevLink = "";
                    nextLink = "#page1-view";
                    backButtonText = "";
                    break;
                case "page1-view":
                    prevLink = "#home-view";
                    nextLink = "#page2-view";
                    backButtonText = "Home";
                    break;
                case "page2-view":
                    prevLink = "#page1-view";
                    nextLink = "#page3-view";
                    backButtonText = "Step 1";
                    break;
                case "page3-view":
                    prevLink = "#page2-view";
                    nextLink = "#page4-view";
                    backButtonText = "Step 2";
                    break;
                case "page4-view":
                    prevLink = "#page3-view";
                    nextLink = "#thankyou-view";
                    backButtonText = "Step 3";
                    break;
                case "thankyou-view":
                    prevLink = "";
                    nextLink = "#home-view";
                    break;
            }
        }

    }
})();

smartSurvey.init();
</script>

</body>
</html>
